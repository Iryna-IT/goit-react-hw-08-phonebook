(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{14:function(t,e,n){t.exports={header:"AppBar_header__D032V",container:"AppBar_container__EMxgt",nav:"AppBar_nav__1lxmr",link:"AppBar_link__1UNqo",activeLink:"AppBar_activeLink__2fULw"}},26:function(t,e,n){t.exports={container:"UserMenu_container__1KgZY",user:"UserMenu_user__21fUO",avatar:"UserMenu_avatar__CWkWK",name:"UserMenu_name__78Qd2",btn:"UserMenu_btn__8pkNm"}},30:function(t,e,n){"use strict";var r,c,a,u=n(3),o=n(32),i=n(2),s=n(8),b=Object(i.c)([],(r={},Object(u.a)(r,s.i,(function(t,e){return e.payload})),Object(u.a)(r,s.c,(function(t,e){return[e.payload].concat(Object(o.a)(t))})),Object(u.a)(r,s.f,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),j=Object(i.c)(!1,(c={},Object(u.a)(c,s.h,(function(){return!0})),Object(u.a)(c,s.i,(function(){return!1})),Object(u.a)(c,s.g,(function(){return!1})),Object(u.a)(c,s.b,(function(){return!0})),Object(u.a)(c,s.c,(function(){return!1})),Object(u.a)(c,s.a,(function(){return!1})),Object(u.a)(c,s.e,(function(){return!0})),Object(u.a)(c,s.f,(function(){return!1})),Object(u.a)(c,s.d,(function(){return!1})),c)),O=function(t,e){return e.payload},l=Object(i.c)(null,(a={},Object(u.a)(a,s.g,O),Object(u.a)(a,s.a,O),Object(u.a)(a,s.d,O),a));e.a={contacts:b,loading:j,error:l}},40:function(t,e,n){"use strict";var r=n(2),c=Object(r.b)("filter/filterContacts",(function(t){return{payload:t}}));e.a={filterContacts:c}},41:function(t,e,n){"use strict";var r=n(3),c=n(2),a=n(40),u=Object(c.c)("",Object(r.a)({},a.a.filterContacts,(function(t,e){return e.payload})));e.a=u},55:function(t,e,n){t.exports={container:"App_container__2aool",header:"App_header__3BhZO"}},7:function(t,e,n){"use strict";n.d(e,"b",(function(){return A})),n.d(e,"a",(function(){return S})),n.d(e,"c",(function(){return q}));var r,c,a,u,o=n(3),i=n(2),s=Object(i.b)("auth/registerRequest"),b=Object(i.b)("auth/registerSuccess"),j=Object(i.b)("auth/registerError"),O=Object(i.b)("auth/loginRequest"),l=Object(i.b)("auth/loginSuccess"),d=Object(i.b)("auth/loginError"),f=Object(i.b)("auth/logoutRequest"),p=Object(i.b)("auth/logoutSuccess"),h=Object(i.b)("auth/logoutError"),m=Object(i.b)("auth/getCurrentUserRequest"),v=Object(i.b)("auth/getCurrentUserSuccess"),g=Object(i.b)("auth/getCurrentUserError"),x={name:null,email:null},k=Object(i.c)(x,(r={},Object(o.a)(r,b,(function(t,e){return e.payload.user})),Object(o.a)(r,l,(function(t,e){return e.payload.user})),Object(o.a)(r,p,(function(){return x})),Object(o.a)(r,v,(function(t,e){return e.payload})),r)),_=Object(i.c)(null,(c={},Object(o.a)(c,b,(function(t,e){return e.payload.token})),Object(o.a)(c,l,(function(t,e){return e.payload.token})),Object(o.a)(c,p,(function(){return null})),c)),y=function(t,e){return e.payload},C=Object(i.c)(null,(a={},Object(o.a)(a,j,y),Object(o.a)(a,d,y),Object(o.a)(a,h,y),Object(o.a)(a,g,y),a)),A={user:k,isAuthenticated:Object(i.c)(!1,(u={},Object(o.a)(u,b,(function(){return!0})),Object(o.a)(u,l,(function(){return!0})),Object(o.a)(u,v,(function(){return!0})),Object(o.a)(u,j,(function(){return!1})),Object(o.a)(u,d,(function(){return!1})),Object(o.a)(u,g,(function(){return!1})),Object(o.a)(u,p,(function(){return!1})),u)),token:_,error:C},U=n(21),N=n.n(U),w=n(28),L=n(23),E=n.n(L);E.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var T=function(t){E.a.defaults.headers.common.Authorization="Bearer ".concat(t)},R=function(){E.a.defaults.headers.common.Authorization=""},S={register:function(t){return function(){var e=Object(w.a)(N.a.mark((function e(n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(s()),e.prev=1,e.next=4,E.a.post("/users/signup",t);case 4:r=e.sent,T(r.data.token),n(b(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(j(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(w.a)(N.a.mark((function t(e){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(f()),t.prev=1,t.next=4,E.a.post("/users/logout");case 4:R(),e(p()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(h(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(w.a)(N.a.mark((function e(n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O()),e.prev=1,e.next=4,E.a.post("/users/login",t);case 4:r=e.sent,T(r.data.token),n(l(r.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(d(e.t0.message)),alert("".concat(e.t0.message,". Try again!"));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(w.a)(N.a.mark((function t(e,n){var r,c,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return T(c),e(m()),t.prev=5,t.next=8,E.a.get("/users/current");case 8:a=t.sent,e(v(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(g(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},q={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name},getUserEmail:function(t){return t.auth.user.email}}},8:function(t,e,n){"use strict";n.d(e,"h",(function(){return c})),n.d(e,"i",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return j})),n.d(e,"d",(function(){return O}));var r=n(2),c=Object(r.b)("items/fetchContactsRequest"),a=Object(r.b)("items/fetchContactsSuccess"),u=Object(r.b)("items/fetchContactsError"),o=Object(r.b)("items/addContactRequest"),i=Object(r.b)("items/addContactSuccess"),s=Object(r.b)("items/addContactError"),b=Object(r.b)("items/deleteContactRequest"),j=Object(r.b)("items/deleteContactSuccess"),O=Object(r.b)("items/deleteContactError")},92:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(29),u=n.n(a),o=n(20),i=n(9),s=n(52),b=n(32),j=n(2),O=n(53),l=n.n(O),d=n(22),f=n(54),p=n.n(f),h=n(6),m=n(30),v=n(41),g=Object(h.c)({contacts:m.a.contacts,filter:v.a,loading:m.a.loading,error:m.a.error}),x=n(7),k=Object(h.c)({user:x.b.user,isAuthenticated:x.b.isAuthenticated,token:x.b.token,error:x.b.error}),_=[].concat(Object(b.a)(Object(j.d)({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})),[l.a]),y={key:"auth",storage:p.a,whitelist:["token"]},C=Object(j.a)({reducer:{auth:Object(d.g)(y,k),contacts:g},middleware:_,devTools:!1}),A={store:C,persistor:Object(d.h)(C)},U=n(16),N=n(17),w=n(19),L=n(18),E=n(5),T=n(14),R=n.n(T),S=n(1),q=function(t){Object(w.a)(n,t);var e=Object(L.a)(n);function n(){return Object(U.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){return Object(S.jsxs)("div",{className:R.a.container,children:[Object(S.jsx)(o.b,{to:"/register",exact:!0,className:R.a.link,activeClassName:R.a.activeLink,children:"Registration"}),Object(S.jsx)(o.b,{to:"/login",exact:!0,className:R.a.link,activeClassName:R.a.activeLink,children:"LogIn"})]})}}]),n}(r.Component),B=function(t){Object(w.a)(n,t);var e=Object(L.a)(n);function n(){return Object(U.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var t=this.props.isAuthenticated;return Object(S.jsx)("nav",{className:R.a.nav,children:t&&Object(S.jsx)(o.b,{to:"/contacts",exact:!0,className:R.a.link,activeClassName:R.a.activeLink,children:"Contacts"})})}}]),n}(r.Component),I=(Object(i.b)((function(t){return{isAuthenticated:x.c.getIsAuthenticated(t)}}))(B),n.p+"static/media/default-avatar.34fb7587.png"),M=n(26),z=n.n(M),D=function(t){Object(w.a)(n,t);var e=Object(L.a)(n);function n(){return Object(U.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var t=this.props,e=t.avatar,n=t.name,r=t.onLogout;return Object(S.jsxs)("div",{className:z.a.container,children:[Object(S.jsxs)("div",{className:z.a.user,children:[Object(S.jsx)("img",{src:e,alt:"avatar",width:"32",className:z.a.avatar}),Object(S.jsx)("span",{className:z.a.name,children:n})]}),Object(S.jsx)("button",{className:z.a.btn,type:"button",onClick:r,children:"LogOut"})]})}}]),n}(r.Component),G={onLogout:x.a.logOut},J=Object(i.b)((function(t){return{name:x.c.getUserEmail(t),avatar:I}}),G)(D),K=function(t){Object(w.a)(n,t);var e=Object(L.a)(n);function n(){return Object(U.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var t=this.props.isAuthenticated;return Object(S.jsx)("header",{className:R.a.header,children:t?Object(S.jsx)(J,{}):Object(S.jsx)(q,{})})}}]),n}(r.Component),W=Object(i.b)((function(t){return{isAuthenticated:x.c.getIsAuthenticated(t)}}))(K),Z=n(24),Q=n(33),V=Object(i.b)((function(t){return{isAuthenticated:x.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(Q.a)(t,["component","isAuthenticated","redirectTo"]);return Object(S.jsx)(E.b,Object(Z.a)(Object(Z.a)({},c),{},{render:function(t){return n?Object(S.jsx)(e,Object(Z.a)({},t)):Object(S.jsx)(E.a,{to:r})}}))})),Y=Object(i.b)((function(t){return{isAuthenticated:x.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(Q.a)(t,["component","isAuthenticated","redirectTo"]);return Object(S.jsx)(E.b,Object(Z.a)(Object(Z.a)({},c),{},{render:function(t){return n&&c.restricted?Object(S.jsx)(E.a,{to:r}):Object(S.jsx)(e,Object(Z.a)({},t))}}))})),F=n(55),H=n.n(F),P=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,97))})),X=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,98))})),$=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,99))})),tt=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,100))})),et=function(t){Object(w.a)(n,t);var e=Object(L.a)(n);function n(){return Object(U.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(S.jsxs)("div",{className:H.a.container,children:[Object(S.jsx)(W,{}),Object(S.jsx)(r.Suspense,{fallback:Object(S.jsx)("p",{children:"Loading..."}),children:Object(S.jsxs)(E.d,{children:[Object(S.jsx)(Y,{exact:!0,path:"/",restricted:!0,redirectTo:"/contacts",component:P}),Object(S.jsx)(Y,{path:"/register",restricted:!0,redirectTo:"/contacts",component:X}),Object(S.jsx)(Y,{path:"/login",restricted:!0,redirectTo:"/contacts",component:$}),Object(S.jsx)(V,{path:"/contacts",redirectTo:"/login",component:tt})]})})]})}}]),n}(r.Component),nt={onGetCurrentUser:x.a.getCurrentUser},rt=Object(i.b)(null,nt)(et);n(91);u.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(i.a,{store:A.store,children:Object(S.jsx)(s.a,{loading:null,persistor:A.persistor,children:Object(S.jsx)(o.a,{children:Object(S.jsx)(rt,{})})})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.223f849b.chunk.js.map